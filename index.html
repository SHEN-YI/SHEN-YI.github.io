<!DOCTYPE html>
<html>
<title>Factors that influence wage</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css">
<style>
body {font-family: "Times New Roman", Georgia, Serif;}
h1,h2,h3,h4,h5,h6 {
    font-family: "Playfair Display";
    letter-spacing: 5px;
}
</style>
<body>

<!-- Navbar (sit on top) -->
<header class="w3-container w3-gray w3-center" style="padding:80px 16px">
  <h1 class="w3-margin w3-jumbo">Factors that influence the wages</h1>
</header>


<!-- Page content -->
<div class="w3-content" style="max-width:1400px">

  <!-- About Section -->
  <div class="w3-container" "w3-padding16" id="starting">
    <blockquote>
    <h2 style="letter-spacing:0pt;color:#757575;font-family:Georgia;font-size:32px">
      <i>
      "Wage and salary administration implies establishment and implementation of sound policies and principles of employee compensation."
    </i>
    <cite>D.C.Beach</cite>
  </blockquote>
    </h2>
    <h2 style="letter-spacing:0pt;font-family:Georgia;font-size:28px">
      Wage, as a heated topic concerned by the public, can be influenced by numerous factors, such as the productivity, the industry standards, demand and supply of labour,
    government policies and to name just a few. However, as employees, these factors may not be quite important because they are sometimes vague and not have dense linkages with the
    daily life of employees. For employees, they may concen about which area to work, or which prerequisite skills or majors that well-paid jobs may need, or even the wage increase rate
    year by year. Four factors that closely link with employees will be illustrated; they are area, time, experience, and education.
    </h2>
  <div>
  <div class="w3-row w3-padding" id="area">
    <div id="tooltip-container"></div>
    <div class="w3-col m6 w3-padding-small">
      <div id="canvas-svg"></div>

    </div>
    <div class="w3-col m6 w3-padding-large">
      <h2 class="w3-center">Wages within area</h2>
      <p class="w3-large w3-text-grey"><i>The data is the 'Modeled Wage Estimates' published by Data.gov, collected by the OES and NCS program. It is the estimates of average hourly wages for occupations
      with various job characteristics and geographical locations.</i></p>
      <p class="w3-large"> The U.S. map show the average wages of people
      from different states. With $25.02 <span class="w3-tag w3-light-grey">per hour</span>, the average occupational salary of Connecticut ranks the first. Whereas, the average wage of Mississippi
      is the lowest, with only $16.93
        <span class="w3-tag w3-light-grey">per hour</span>. And, people in the northeastern United States are paid more hourly.</p>
      <p class="w3-large">
        For each state, its average salary and top three highest salary occupations are shown. The best-paying job for the majority of states is the Financial managers,
        with nearly $55 per hour on average. Besides, management occupations often offer a considerable amount of salaries. It seems each state may have its own culture and structure, one of the interesting points is California,
        due to the Silicon Valley, only in this state, the average wage of software developer can rank first, and it can not rank even the third place in other states.
        </p>
      <p class="w3-large">
        Another non-negligible fact is, though the average wages for top three well-paid jobs are significantly high, the average wage in total is two times even three times
        lower than those well-paid job. The gap between the wealthy and poor is considerably wide. The majority of the job is range from $15 to $25. However, there are still numerous
        job lower than $8 an hour.
        </p>
    </div>
  </div>

  <div class="w3-container" "w3-padding16" id="handover">
    <h5 style="letter-spacing:0pt">
      Another factor that plays an important role in the growth of the average wages is the time. Undoubtedly, the cost of living has been increasing
      gradually year by year, and the incomes of people: wage grows year by year as well.
    </h5>
  <div>

  <div class="w3-row " id="year">
    <div class="w3-col l6 w3-padding-32">
      <h1 class="w3-center">Wages within time</h1>
    <p class="w3-large w3-text-grey"><i>
      The data of the figure is one part of the Average annual wages from OECD organisation website, the x-axis is the year from 2000 to 2016, and the y-axis is the average wage of the citizens in that country. <thead>
        wages is measured in year.
      </i>
      </thead>
      </p>
    <p class="w3-large">
      As is known to the public that the average wages may broadly increase year by year due to the complicated factors, but to what extent they may rise, let's make them quantitive. This interactive figure shows the average wages of four countries: Australia, United States, United Kingdom and France, note that unit of the y-axis of these four line charts are different,
      which means the average salary for each country are measure in its currency, and that will show the rise of wage more intuitive. The measurement starts from 2000 and ends at 2016. Apparently,
      for all the country, the trend of average salary for all four countries is increasing.
      Zooming in the case of American,the end of the 20th century, until around 1995, the vast number of American employed workers suffered from the plight of declining real wages. Wage squeeze not only torments the disadvantaged workers, but also torments most of the United States.
      In the 21st century, the trend of the change of the real wages of the productive employees in the United States has obviously been on the continuous rise.
      </p>
      <p class="w3-large">
        The result of increase of wages with year is complex; it can be the synergy of inflation, the increase in minimum wage or even the industry factor.
        As a result of inflation, higher wages may be needed to compensate for the increased cost of services and goods. The state and government may enact the laws to ensure the minimum wages should afford the living of people.
        Since there is a large portion of people living with minimum wages, the rise of this will lead the increase of the overall average wages. In addition, broadly, the industry that growing rapidly will
        offer the higher wages to attract the talent or retain the professional employees, other company may rise the wage as well due to the competition. Thus, the average wages will increase.
      </p>
    </div>

    <div class="w3-col l6 w3-padding-large">
        <svg width="800" height="800" id="canvas-svg-line"></svg>
  </div>

  <hr>

  <div class="w3-row " id="education">
    <div class="w3-col l6 w3-padding-large">
        <svg width="750" height="800" id="canvas-svg-bar"></svg>
  </div>
    <div class="w3-col l6 w3-padding-32">
      <h1 class="w3-center">Education and experience</h1>
    <p class="w3-large w3-text-gray"><i>
      The data comes from Kaggle.com with its name 'Where it Pays to Attend College' collected by the Wall Street Journal. It contains the salary of graduate students of their starting wages and mid-career wages with
      different majors.
    </i>
      </p>
    <p class="w3-large">
      The figure shows the median wage of career beginning and mid-career with different majors of graduate students. According to the chart and the status quo, the vast majority of university students will have a higher salary after working for a few years.
       ,and this relates to a key influential factor of wage: experience. Experience plays a crucial role in the wage bargaining process, sometimes even important than education since the employers may not
      care too much about the education background of an employee who has worked for more than five years, the factor that they looking forward might be the ability and experience.
      </p>
      <p class="w3-large">
        In recent years, universities students have increased sharply, and the form of employment is very grim. In the current situation, universities students have just begun not to be too concerned about wage income.
        Giving the highest priority to the wage, employeed with frequent job-hopping at the starting of their career are wasting their golden time, if the first employment,
          accumulation of experience, they will probably have been in a higher position and better-paid.

      </p>
        <p class="w3-large">
          It is not surprise that the majors related to science, technology, engineering math associate with high salary. For some industries, the increasing speed of wage is slow, but for some others, such as the chemical engineering, the development is rapid and this speed may largely
          depend on the status of the industries. Most of jobs, with moderate wage, are in the same levels. So the suggestion might be while choosing the major in the university, one should give the priority to the interest instead of considering which will pay him/her back. Since they are in the same wage level.
        </p>
    </div>



</div>
<div class="d3-tip n" style="position: absolute; opacity: 0; pointer-events: none;"></div>

<footer class="w3-container w3-light-gray w3-center">
  <p>Powered by Yi Shen</p>
</footer>


<script src="http://d3js.org/d3.v4.min.js" charset="utf-8"></script>
<script src="https://d3js.org/topojson.v2.min.js"></script>
<!-- <link rel="stylesheet" href="style.css"> -->
<script src = "Callback.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<script>





var WIDTH = 800, HEIGHT = 600;

var COLOR_COUNTS = 9;

var SCALE = 0.9;
var config={color1:"#d9e5f7" ,color2:"#587199",mainCategory:"Washington",averageCategory:"Nation Average",stateDataColumn:"state_name",valueDataColumn:"avg_value"}
var bar={x:550,y:370,w:200,h:10}
var map={x:-90,y:70}
var offset={x:0,y:100}

var MAIN_CATEGORY = config.mainCategory;
var AVG_CATEGORY = config.averageCategory;
function Interpolate(start, end, steps, count) {
 var s = start,
     e = end,
     final = s + (((e - s) / steps) * count);
 return Math.floor(final);
}

function Color(_r, _g, _b) {
 var r, g, b;
 var setColors = function(_r, _g, _b) {
     r = _r;
     g = _g;
     b = _b;
 };

 setColors(_r, _g, _b);
 this.getColors = function() {
     var colors = {
         r: r,
         g: g,
         b: b
     };
     return colors;
 };
}

function hexToRgb(hex) {
 var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
 return result ? {
     r: parseInt(result[1], 16),
     g: parseInt(result[2], 16),
     b: parseInt(result[3], 16)
 } : null;
}

var COLOR_FIRST = config.color1, COLOR_LAST = config.color2;

var rgb = hexToRgb(COLOR_FIRST);

var COLOR_START = new Color(rgb.r, rgb.g, rgb.b);

rgb = hexToRgb(COLOR_LAST);
var COLOR_END = new Color(rgb.r, rgb.g, rgb.b);

var MAP_CATEGORY = config.stateDataColumn;
var MAP_VALUE = config.valueDataColumn;

var width = WIDTH,
 height = HEIGHT;

var valueById = d3.map();
var topById   = d3.map();

var startColors = COLOR_START.getColors(),
    endColors = COLOR_END.getColors();

var colors = [];

for (var i = 0; i < COLOR_COUNTS; i++) {
var r = Interpolate(startColors.r, endColors.r, COLOR_COUNTS, i);
var g = Interpolate(startColors.g, endColors.g, COLOR_COUNTS, i);
var b = Interpolate(startColors.b, endColors.b, COLOR_COUNTS, i);
colors.push(new Color(r, g, b));
}

var quantize = d3.scaleQuantize()
 .domain([0, 1.0])
 .range(d3.range(COLOR_COUNTS).map(function(i) { return i }));

var projection = d3.geoAlbersUsa();
var path = d3.geoPath().projection(projection);
//var path = d3.geoPath();

var svg = d3.select("#canvas-svg").append("svg")
 .attr("width", width)
 .attr("height", height)
 .attr("transform", "translate(0,0)")

 var gradient = svg.append("defs")
   .append("linearGradient")
     .attr("id", "gradient")
     .attr("x1", "0%")
     .attr("y1", "0%")
     .attr("x2", "100%")
     .attr("y2", "0%")
     .attr("spreadMethod", "pad");

     gradient.append("stop")
       .attr("offset", "0%")
       .attr("stop-color", config.color1)
       .attr("stop-opacity", 1);

   gradient.append("stop")
       .attr("offset", "100%")
       .attr("stop-color", config.color2)
       .attr("stop-opacity", 1);

d3.tsv("https://s3-us-west-2.amazonaws.com/vida-public/geo/us-state-names.tsv", function(error, names) {

name_id_map = {};
id_name_map = {};

for (var i = 0; i < names.length; i++) {
name_id_map[names[i].name] = names[i].id;
id_name_map[names[i].id] = names[i].name;
}

d3.csv("state_average.csv", function(error, data) {
data.forEach(function(d) {
var id = name_id_map[d[MAP_CATEGORY]];

valueById.set(id, +d[MAP_VALUE]);
});
quantize.domain([d3.min(data, function(d){ return +d[MAP_VALUE] }),
  d3.max(data, function(d){ return +d[MAP_VALUE] })]);
});


d3.csv("state_top.csv", function(error, top) {
top.forEach(function(d){
  var ind=d["ind"]
  var tp={
  "w1":d["w1"],
  "s1":d["s1"],
  "w2":d["w2"],
  "s2":d["s2"],
  "w3":d["w3"],
  "s3":d["s3"]
};
  topById.set(ind,tp);
});
});

function makeMap(us) {
svg.append("g")
   .attr("class", "categories-choropleth")
   .selectAll("path")
   .data(topojson.feature(us, us.objects.states).features)
   .enter().append("path")
   .attr("transform", "translate("+map.x+","+map.y+") scale(" + SCALE + ")")
   .style("fill", function(d) {
     if (valueById.get(d.id)) {
       var i = quantize(valueById.get(d.id));
       var color = colors[i].getColors();
       return "rgb(" + color.r + "," + color.g +
           "," + color.b + ")";
     } else {
       return "";
     }
   })
   .attr("d", path)
   .on("mousemove", function(d) {
       var html = "";
       html += "<div class=\"tooltip_kev\">";
       html += "<span class=\"tooltip_key\">";
       html += id_name_map[d.id];
       html += "</span>";
       html += "<span class=\"tooltip_value\">";
       html += "$"+(valueById.get(d.id) ? valueById.get(d.id) : "");
       html += "</span>";
       html += "</br>";
       html += "</br>";
       html +="<span class=\"topthree\">";
       html += "Top 3 highest-pay occupation:";
       html +="</span>"
       html += "</br>";
       html += "</br>";
       html += "<span class=\"tooltip_top_key\">";
       html += "#1: "+topById.get(d.id).w1+"  ";
       html += "</span>";
       html += "<span class=\"tooltip_top_value\">";
       html += "$"+(topById.get(d.id).s1 ? topById.get(d.id).s1 : "");
       html += "";
       html += "</span>";
       html += "</br>"
       html += "<span class=\"tooltip_top_key\">";
       html += "#2: "+topById.get(d.id).w2+"  ";
       html += "</span>";
       html += "<span class=\"tooltip_top_value\">";
       html += "$"+(topById.get(d.id).s2 ? topById.get(d.id).s2 : "");
       html += "";
       html += "</span>";
       html += "</br>"
       html += "<span class=\"tooltip_top_key\">";
       html += "#3: "+topById.get(d.id).w3+"  ";
       html += "</span>";
       html += "<span class=\"tooltip_top_value\">";
       html += "$"+(topById.get(d.id).s3 ? topById.get(d.id).s3 : "");
       html += "";
       html += "</span>";
       html += "</div>";
       $("#tooltip-container").html(html);
       $(this).attr("fill-opacity", "0.8");
       $("#tooltip-container").show();

       var coordinates = d3.mouse(this);

       var map_width = $('.categories-choropleth')[0].getBoundingClientRect().width;

       if (d3.event.layerX < map_width / 1.1) {
         d3.select("#tooltip-container")
           .style("top", (d3.event.layerY + 15) + "px")
           .style("left", (d3.event.layerX + 15) + "px");
       } else {
         var tooltip_width = $("#tooltip-container").width();
         d3.select("#tooltip-container")
           .style("top", (d3.event.layerY + 15) + "px")
           .style("left", (d3.event.layerX - tooltip_width - 30) + "px");
       }
   })
   .on("mouseout", function() {
           $(this).attr("fill-opacity", "1.0");
           $("#tooltip-container").hide();
       });

svg.append("text").text("Average occupational wages of US state")
   .attr("class", "map-header")
   .attr("x",70)
   .attr("y",60);

svg.append("path")
  //.datum({type: "FeatureCollection",features:topojson.mesh(us, us.objects.states, function(a, b) { return a !== b; })})
  .attr("transform", "translate("+map.x+","+map.y+") scale(" + SCALE + ")")
  .attr("class", "categories")
  .attr("d", path(topojson.mesh(us, us.objects.states, function(a, b) { return a !== b; })));



}


svg.append("rect")
    .attr("width", bar.w)
    .attr("height", bar.h)
    .attr("x",bar.x-200+offset.x)
    .attr("y",bar.y+map.y+offset.y)
    .style("fill", "url(#gradient)");

d3.csv("state_average.csv", function(error, data) {
  var state_min=d3.min(data, function(d){ return +d[MAP_VALUE] });
  var state_max=d3.max(data, function(d){ return +d[MAP_VALUE] });

svg.append('text').text("$"+state_min+"/hour")
    .attr('x', bar.x-40-200+offset.x)
    .attr('y', bar.y+map.y+2.5*bar.h+offset.y)
    .attr('fill', 'black');

svg.append('text').text("$"+state_max+"/hour")
    .attr('x', bar.x+0.8*bar.w-200+offset.x)
    .attr('y', bar.y+map.y+2.5*bar.h+offset.y)
    .attr('fill', 'black');

svg.append('text').text("(source: Data.gov, 2017)")
    .attr('class', "graph-ref")
    .attr('x', bar.x-300+offset.x)
    .attr('y', bar.y+map.y+5*bar.h+offset.y)
    .attr('fill','darkgray')
});

d3.json("https://s3-us-west-2.amazonaws.com/vida-public/geo/us.json", function(error, us) {
makeMap(us);
});
  });

   </script>

   <script src="line_plot.js"></script>
   <script src="bar_plot.js"></script>
</body>


</html>
